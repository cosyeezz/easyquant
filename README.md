# EasyQuant - 量化交易系统

EasyQuant 是一个使用Python和Web技术构建的量化交易系统，支持数据处理（ETL）、策略回测和实盘交易。系统采用多进程架构，并提供一个基于Web的实时监控仪表盘。

## 系统架构

本系统采用前后端分离的现代化架构，由以下几个核心部分组成：

1.  **主控进程 (Main Process):** 整个应用的入口，负责启动和管理所有后台工作进程，并运行FastAPI服务。它持有一个全局共享的状态字典，用于收集所有子进程的状态。

2.  **工作子进程 (Worker Processes):** 每个后台任务（如数据处理、回测、实盘）都是一个独立的子进程。这些进程继承自`server/common/monitor.py`中的`BaseMonitor`，在运行时将自己的实时状态写入共享字典。

3.  **FastAPI 服务端 (The Bridge):** 作为监控数据的桥梁，通过WebSocket (`/ws/status`) 将后台进程的状态实时推送到前端。

4.  **React 前端 (Dashboard):** 浏览器中的监控仪表盘，通过WebSocket连接到服务端，实时接收并展示所有进程的动态。

### 架构图

```
+------------------+      +-------------------------+      +---------------------+
|  React 监控前端   |<---->|  FastAPI + WebSocket    |<---->|  主控进程 (Python)  |
| (浏览器)         |      |  (服务端)               |      |  (管理子进程)       |
+------------------+      +-------------------------+      +---------------------+
        ^                            ^                            |
        | (WebSocket 连接)           | (直接读取)                  | (创建和管理)
        +----------------------------+                            |
                                     |                            |
                             +-----------------------+              |
                             |  共享的状态字典        |              |
                             | (multiprocessing.dict)|              |
                             +-----------------------+              |
                                     ^   ^   ^                      |
                                     |   |   | (子进程写入状态)        |
            +------------------------+   |   +-------------------+  |
            |                            |                       |  |
+---------------------+    +---------------------+   +---------------------+
| 数据处理子进程       |    | 回测引擎子进程       |   | 实盘交易子进程       |
| (继承 BaseMonitor)  |    | (继承 BaseMonitor)  |   | (继承 BaseMonitor)  |
+---------------------+    +---------------------+   +---------------------+
```

## 目录结构

```
easyquant/
├── .git/
├── client/
│   └── (React 前端应用)
├── server/
│   ├── common/            # 后端内部通用模块
│   │   ├── __init__.py
│   │   └── monitor.py     # 监控基类 BaseMonitor
│   ├── etl/
│   │   ├── __init__.py
│   │   ├── data_loader/   # 数据加载
│   │   │   └── __init__.py
│   │   ├── process/       # 数据处理
│   │   │   └── __init__.py
│   │   └── storage/       # 数据存储
│   │       └── __init__.py
│   ├── backtest/          # 回测模块
│   │   └── __init__.py
│   ├── live/              # 实盘模块
│   │   └── __init__.py
│   ├── main.py            # 系统主入口和FastAPI服务
│   └── test_client.html   # 用于测试的临时WebSocket客户端
├── img.png
├── README.md              # 本文档
└── requirements.txt       # Python 依赖
```

## 快速启动

1.  **安装依赖:**
    ```sh
    pip install -r requirements.txt
    ```

2.  **启动服务:**
    ```sh
    python server/main.py
    ```
    服务启动后，后台模拟进程将开始运行，同时FastAPI服务器将在 `http://127.0.0.1:8000` 上提供服务。

3.  **测试监控:**
    在浏览器中打开 `server/test_client.html` 文件，即可看到实时更新的进程监控页面。
