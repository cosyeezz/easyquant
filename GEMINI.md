# Gemini 工作区规则

本文档记录了在此项目中与 Gemini 协作时需要遵守的特定规则和约定。

## 编码与开发

- **规则 1:** 不在正式的应用模块代码中编写测试或生成虚拟数据。
- **规则 2:** 系统设计必须达到生产级标准，拒绝临时占位代码。
- **规则 3:** **严禁使用 `print()`**，必须使用 `logging`。
- **规则 4:** 严格遵守 Windows/跨平台编码规范 (UTF-8)。
- **规则 5:** 端口规范: 后端 8000, 前端 3000。

## 架构执行记录 (2025-12-14) [NEW]

- **ETL 架构升级**: 决定放弃线性列表编辑器，转向 **节点图编辑器 (Node-based Graph Editor)**。
- **UI 设计哲学**: 
    - **Copy Dify/Coze**: 直接复刻 Dify 的前端交互和视觉风格，而非集成其后端。
    - **Compact/Miniature**: 节点设计极其紧凑（宽度 ~100px，字体 ~6px），以适应复杂的数据流图。
- **当前进度**: 
    - 前端 Canvas 基础已完成（拖拽、连接、菜单、缩放）。
    - 视觉样式已定型（微型卡片）。
- **接下来的任务 (Handover)**:
    - 实现 **Schema Propagation** (元数据在节点间的自动流动)。
    - 完成 Graph JSON 到后端 Runner 的映射。

## 架构执行记录 (2025-12-13)

- **实时监控**: 实现了全 WebSocket 事件流，移除 HTTP 轮询。
- **性能优化**: 确认内网直连优于 SSH 隧道。
- **环境自愈**: 完善了 SSH 隧道自动建立和 Alembic 自动迁移。

## 架构执行记录 (2025-12-07)

- **ETL 基础**: 完成了 `runner.py` 和基础 API。
